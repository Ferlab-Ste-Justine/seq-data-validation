// Once you have added the required tests, please run the following command to build this file:
// nf-core subworkflows test vcf_id_repair
nextflow_workflow {

    name "Test Subworkflow VCF_ID_REPAIR"
    script "../main.nf"
    workflow "VCF_ID_REPAIR"
    config "./nextflow.config"

    tag "subworkflows"
    tag "subworkflows_Ferlab-Ste-Justine"
    tag "subworkflows/vcf_id_repair"
    // Tags for all modules used within this subworkflow.
    tag "bcftools"
    tag "bcftools/query"
    tag "bcftools/reheader"


    // Test name indicating the test-data and file-format used
    test("sarscov2 - [meta, vcf, tbi]") {

        when {
            workflow {
                """
                input[0] = [
                    [ id:'out' ], // meta map
                    file(params.modules_testdata_base_path + 'genomics/sarscov2/illumina/vcf/test.vcf.gz', checkIfExists: true),
                    file(params.modules_testdata_base_path + 'genomics/sarscov2/illumina/vcf/test.vcf.gz.tbi', checkIfExists: true)
                ]
                """
            }
        }

        then {
            assertAll(
                { assert workflow.success },
                { assert snapshot( workflow.out ).match() }
            )
        }
    }
}
