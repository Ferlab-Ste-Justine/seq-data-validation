{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/Ferlab-Ste-Justine/seq-data-validation/master/assets/schema_input.json",
    "title": "Ferlab-Ste-Justine/seq-data-validation pipeline - params.input schema",
    "description": "Schema for the file provided with params.input",
    "type": "array",
    "items": {
        "type": "object",
        "properties": {
            "participant": {
                "type": "string",
                "pattern": "^\\S+$",
                "errorMessage": "participant ID must be provided and cannot contain spaces",
                "meta": ["participant"]
            },
            "sample": {
                "type": "string",
                "pattern": "^\\S+$",
                "errorMessage": "Sample ID must be provided and cannot contain spaces",
                "meta": ["id", "sample"]
            },
            "strategy": {
                "type": "string",
                "errorMessage": "Experimental strategy. Required if files from multiple strategies present in samplesheet. Must be one of: WGS, WXS, TARS, RNAS, ATACS, BIS, TMS, CHIPS. Defaults to WGS if not provided.",
                "meta": ["sequencingType"],
                "default": "WGS",
                "enum": ["WGS", "WXS", "TARS", "RNAS", "ATACS", "BIS", "TMS", "CHIPS"]
            },
            "status": {
                "type": "integer",
                "errorMessage": "Status can only be 0 (normal) or 1 (tumor). Defaults to 0, if none is supplied.",
                "meta": ["status"],
                "default": 0,
                "minimum": 0,
                "maximum": 1
            },
            "lane": {
                "type": "string",
                "pattern": "^\\S+$",
                "meta": ["lane"]
            },
            "runId": {
                "type": "string",
                "pattern": "^\\S+$",
                "meta": ["runId"]
            },
            "fileType": {
                "errorMessage": "File type must be one of: fastq, bam, cram, gvcf. Defaults to fastq, if none is supplied.",
                "meta": ["fileType"],
                "type": "string",
                "enum": ["FASTQ", "BAM", "CRAM", "GVCF", "VCF"]
            },
            "file1": {
                "errorMessage": "File name cannot contain spaces and must have a valid extension according to the fileType provided.",
                "type": "string",
                "pattern": "^\\S+\\.(f(ast)?q|cram|bam|g?vcf)(\\.gz)?$",
                "format": "file-path",
                "exists": true
            },
            "file2": {
                "errorMessage": "File name cannot contain spaces and must have a valid extension according to the fileType provided.",
                "type": "string",
                "pattern": "^\\S+\\.(f(ast)?q(\\.gz)?|crai|bai|csi|tbi|idx)$",
                "format": "file-path",
                "exists": true
            }
        },
        "dependentRequired": {
            "file2": ["file1"]
        },
        "required": ["participant", "sample", "file1"],
        "uniqueEntries": ["lane", "runId", "participant", "sample", "strategy"]
    }
}
